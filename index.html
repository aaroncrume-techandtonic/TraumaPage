<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Overlooked Signs of Trauma: A Healing Journey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            transition: background-color 0.5s ease;
        }
        .medicine-wheel-bg {
            background: radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.02) 100%);
        }
        .quadrant-yellow { border-top: 8px solid #FBBF24; } /* East: Physical/Beginnings */
        .quadrant-red { border-top: 8px solid #EF4444; }    /* South: Emotional/Youth */
        .quadrant-black { border-top: 8px solid #111827; }  /* West: Mental/Adulthood */
        .quadrant-white { border-top: 8px solid #F9FAFB; }  /* North: Spiritual/Wisdom */
        
        .medicine-wheel-circle {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 4px solid #334155;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .quadrant {
            position: absolute;
            width: 50%;
            height: 50%;
        }
        .q-east { top: 0; right: 0; background-color: #FBBF24; }
        .q-south { bottom: 0; right: 0; background-color: #EF4444; }
        .q-west { bottom: 0; left: 0; background-color: #111827; }
        .q-north { top: 0; left: 0; background-color: #F9FAFB; }

        .book-content h1 { @apply text-3xl font-bold mb-6 text-slate-900; }
        .book-content h2 { @apply text-2xl font-semibold mt-8 mb-4 text-slate-800; }
        .book-content h3 { @apply text-xl font-medium mt-6 mb-3 text-slate-700; }
        .book-content p { @apply mb-4 leading-relaxed text-slate-600 text-lg; }
        .book-content ul { @apply list-disc ml-6 mb-6 space-y-2 text-slate-600; }
        .book-content table { @apply w-full border-collapse my-6 bg-white rounded-lg overflow-hidden shadow-sm; }
        .book-content th { @apply bg-slate-100 p-3 text-left font-bold border-b; }
        .book-content td { @apply p-3 border-b text-slate-600; }

        .view-transition {
            animation: fadeIn 0.4s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 medicine-wheel-bg min-h-screen">

    <!-- App State Controller -->
    <div id="app">
        <!-- Home View -->
        <div id="home-view" class="view-transition">
            <!-- Hero Section -->
            <header class="relative bg-white border-b border-slate-200 overflow-hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">
                    <!-- Medicine Wheel Icon -->
                    <div class="flex justify-center mb-8">
                        <div class="medicine-wheel-circle rotate-45 scale-75 md:scale-100">
                            <div class="quadrant q-north"></div>
                            <div class="quadrant q-east"></div>
                            <div class="quadrant q-south"></div>
                            <div class="quadrant q-west"></div>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div class="bg-white p-2 rounded-full shadow-lg">
                                    <i class="fa-solid fa-feather-pointed text-slate-800 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-slate-900 mb-6">
                        The Overlooked Signs of Trauma
                    </h1>
                    <p class="text-xl text-slate-600 max-w-3xl mx-auto mb-10 leading-relaxed">
                        Inspired by the Sacred Hoop and the wisdom of the Medicine Wheel. A comprehensive journey through identification, neurobiology, and daily integration.
                    </p>
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="#series-breakdown" class="bg-indigo-600 text-white px-8 py-4 rounded-full font-semibold hover:bg-indigo-700 transition-all shadow-lg">
                            Read the Books
                        </a>
                        <button onclick="scrollToResources()" class="bg-slate-100 text-slate-800 px-8 py-4 rounded-full font-semibold hover:bg-slate-200 transition-all">
                            Mental Health Resources
                        </button>
                    </div>
                </div>
            </header>

            <!-- Series Breakdown -->
            <section id="series-breakdown" class="py-20 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold text-slate-900 mb-4">The Four Quadrants of Recovery</h2>
                    <p class="text-slate-600 max-w-2xl mx-auto">Balanced healing addressing the Physical, Emotional, Mental, and Spiritual aspects of trauma.</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Book 1 Card -->
                    <div class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all border-t-8 border-yellow-400 flex flex-col h-full">
                        <div class="text-yellow-500 mb-4 text-xs font-bold uppercase tracking-widest">East: The Physical / Beginnings</div>
                        <h3 class="text-xl font-bold mb-2">Book 1: The Hidden Language</h3>
                        <p class="text-slate-600 mb-6 flex-grow">
                            Identifying the <strong>17 overlooked signs</strong> that reveal how trauma manifests physically and behaviorally.
                        </p>
                        <button onclick="openReader(1)" class="w-full py-4 bg-yellow-50 text-yellow-700 font-bold rounded-xl hover:bg-yellow-100 transition-colors">
                            Read Now
                        </button>
                    </div>

                    <!-- Book 2 Card -->
                    <div class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all border-t-8 border-red-500 flex flex-col h-full">
                        <div class="text-red-500 mb-4 text-xs font-bold uppercase tracking-widest">South: The Emotional / Vitality</div>
                        <h3 class="text-xl font-bold mb-2">Book 2: Neurochemical Hijack</h3>
                        <p class="text-slate-600 mb-6 flex-grow">
                            Understanding the root causes and how trauma displaces normal thought for a relentless fight or flight mode.
                        </p>
                        <button onclick="openReader(2)" class="w-full py-4 bg-red-50 text-red-700 font-bold rounded-xl hover:bg-red-100 transition-colors">
                            Read Now
                        </button>
                    </div>

                    <!-- Book 3 Card -->
                    <div class="bg-white p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all border-t-8 border-slate-900 flex flex-col h-full">
                        <div class="text-slate-900 mb-4 text-xs font-bold uppercase tracking-widest">West: The Mental / Introspection</div>
                        <h3 class="text-xl font-bold mb-2">Book 3: Reclaiming Your Life</h3>
                        <p class="text-slate-600 mb-6 flex-grow">
                            Techniques including hypnosis to relieve symptoms and strategies for communicating with loved ones.
                        </p>
                        <button onclick="openReader(3)" class="w-full py-4 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-colors">
                            Read Now
                        </button>
                    </div>
                </div>
            </section>

            <!-- Resource Section -->
            <section id="resources-section" class="bg-slate-100 py-16 border-t-8 border-white">
                <div class="max-w-4xl mx-auto px-4">
                    <div class="text-center mb-10">
                        <div class="text-slate-400 mb-2 text-xs font-bold uppercase tracking-widest">North: The Spiritual / Wisdom</div>
                        <h2 class="text-2xl font-bold">Mental Health Resources</h2>
                    </div>
                    <div class="space-y-4" id="resource-list">
                        <!-- Resources will be dynamically populated -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Reader View (Hidden by default) -->
        <div id="reader-view" class="hidden view-transition">
            <nav class="sticky top-0 bg-white/80 backdrop-blur-md border-b z-20">
                <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
                    <button onclick="closeReader()" class="flex items-center text-slate-600 hover:text-slate-900 font-medium">
                        <i class="fa-solid fa-arrow-left mr-2"></i> Back to Series
                    </button>
                    <div class="flex items-center gap-3">
                        <button id="tts-btn" onclick="toggleTTS()" class="w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-indigo-600 hover:text-white transition-all shadow-sm" title="Listen to Chapter">
                            <i class="fa-solid fa-volume-high"></i>
                        </button>
                        <span id="reading-status" class="hidden text-xs font-bold text-indigo-600 animate-pulse">READING...</span>
                    </div>
                </div>
            </nav>
            <main class="max-w-3xl mx-auto px-6 py-12">
                <div id="book-display" class="book-content prose prose-slate prose-lg">
                    <!-- Book text loads here -->
                </div>
            </main>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-white/90 z-50 flex flex-col items-center justify-center hidden">
        <div class="medicine-wheel-circle animate-spin scale-50 opacity-20">
            <div class="quadrant q-north"></div>
            <div class="quadrant q-east"></div>
            <div class="quadrant q-south"></div>
            <div class="quadrant q-west"></div>
        </div>
        <p class="mt-4 font-bold text-slate-500">Processing Audio...</p>
    </div>

    <script>
        const apiKey = ""; // Injected by environment

        const books = {
            1: {
                title: "Book 1: The Hidden Language of Trauma",
                content: `
                    <h1>The Hidden Language of Trauma: 17 Overlooked Signs Leading to Misdiagnosis</h1>
                    <p>If you’ve ever felt like the diagnosis you received just didn’t fit, or that the symptoms you experience daily aren’t being fully addressed, this book is for you.</p>
                    <p>Trauma leaves a mark, and that mark often expresses itself in subtle, often confusing ways that are easily mistaken for character flaws, anxiety, or general depression. These are the <strong>overlooked signs</strong>—the quiet symptoms of Post-Traumatic Stress Disorder (PTSD), Post-Traumatic Stress Syndrome (PTSS), or, most commonly when trauma is chronic, Complex PTSD (CPTSD).</p>
                    <h2>Part I: Defining the Landscape of Trauma</h2>
                    <h3>PTSD, PTSS, and Complex PTSD</h3>
                    <p>While often used interchangeably, these three terms describe distinct patterns of trauma response. Understanding the differences can be crucial for finding the right path to healing.</p>
                    <ul>
                        <li><strong>PTSD:</strong> Typically follows a single, terrifying event (e.g., a serious accident or assault).</li>
                        <li><strong>PTSS:</strong> Sub-clinical symptoms of trauma that don't meet full diagnostic criteria but still cause distress.</li>
                        <li><strong>Complex PTSD (CPTSD):</strong> Results from prolonged, repeated trauma from which there was little or no chance of escape.</li>
                    </ul>
                    <h2>Part II: The 17 Overlooked Signs</h2>
                    <p>These 17 signs describe behaviors that feel like self-sabotage but are actually survival-driven coping mechanisms.</p>
                    <ol class="space-y-4">
                        <li><strong>1. Over-explaining or people-pleasing:</strong> An attempt to control conflict.</li>
                        <li><strong>2. Tearing yourself down:</strong> Hurting yourself first so others can't.</li>
                        <li><strong>3. Ignoring your needs:</strong> A survival response from childhood neglect.</li>
                        <li><strong>4. Chasing validation:</strong> A temporary fix for trauma-based shame.</li>
                        <li><strong>5. Apologizing for existing:</strong> Deep-seated core shame.</li>
                        <li><strong>6. Splitting:</strong> Seeing the world as all-good or all-bad.</li>
                        <li><strong>7. Hypervigilance:</strong> Scanning every room for danger.</li>
                        <li><strong>8. Extreme attachment styles:</strong> Attaching fast or isolating completely.</li>
                        <li><strong>9. Constant busyness:</strong> Working so you don't have to feel.</li>
                        <li><strong>10. Dissociation:</strong> "Checking out" mid-conversation.</li>
                        <li><strong>11. Survival cynicism:</strong> Questioning everyone's motives.</li>
                        <li><strong>12. Chronic loneliness:</strong> Feeling alone even in a crowd.</li>
                        <li><strong>13. Trauma rehearsal:</strong> Expecting disappointment before it happens.</li>
                        <li><strong>14. Emotional freeze:</strong> Shutting down when asked what you feel.</li>
                        <li><strong>15. Disproportionate reactions:</strong> Exploding or withdrawing when hurt.</li>
                        <li><strong>16. Constant comparison:</strong> Fuelled by negative self-concept.</li>
                        <li><strong>17. Repetition compulsion:</strong> Choosing familiar pain because it feels like home.</li>
                    </ol>
                `
            },
            2: {
                title: "Book 2: The Neurochemical Hijack",
                content: `
                    <h1>The Neurochemical Hijack: Root Causes and Survival Mode</h1>
                    <p>Every single sign—from people-pleasing to instant withdrawal—is the logical result of a nervous system that was forced to adapt to an environment it deemed unsafe.</p>
                    <h2>Part I: The Root Cause—The Nervous System Rewired</h2>
                    <h3>The Polyvagal Theory</h3>
                    <p>The nervous system has three main modes of survival, constantly scanning for danger:</p>
                    <ul>
                        <li><strong>Ventral Vagal (Safety):</strong> Calm, connected, and safe.</li>
                        <li><strong>Sympathetic (Action):</strong> The classic Fight or Flight mode.</li>
                        <li><strong>Dorsal Vagal (Collapse):</strong> Freeze or Shutdown when escape is impossible.</li>
                    </ul>
                    <h2>Part II: The Displacement of Normal Thought</h2>
                    <p>When your body senses danger, it executes a protocol that displaces logical thought.</p>
                    <ul>
                        <li><strong>Prefrontal Cortex:</strong> The "Pilot" shuts down, removing logical control.</li>
                        <li><strong>Amygdala:</strong> The fear alarm goes into overdrive.</li>
                        <li><strong>Hippocampus:</strong> Fails to file memories as "past," making them feel present.</li>
                    </ul>
                    <h2>Part III: The Chemical Flood</h2>
                    <p>Chronic stress hormones (Adrenaline, Cortisol) can lead to hypertension, immune dysfunction, and digestive issues.</p>
                `
            },
            3: {
                title: "Book 3: Reclaiming Your Life",
                content: `
                    <h1>Reclaiming Your Life: Daily Healing and Communication</h1>
                    <p>Healing from trauma is not a sudden cure; it is a moment-by-moment practice of gently teaching your nervous system that the danger is over.</p>
                    <h2>Part I: Healing Day by Day</h2>
                    <h3>Grounding Techniques</h3>
                    <p>Grounding brings your awareness back to the present moment.</p>
                    <ul>
                        <li><strong>5-4-3-2-1 Method:</strong> Engage all five senses to anchor yourself.</li>
                        <li><strong>TIPP Skill:</strong> Temperature, Intense exercise, Paced breathing, and Paired muscle relaxation.</li>
                    </ul>
                    <h2>Part II: Advanced Tools</h2>
                    <h3>Hypnosis & Imagery</h3>
                    <p>Therapeutic hypnosis speaks directly to the subconscious mind to bypass the analytical "blockers" of a traumatized brain.</p>
                    <h3>Somatic Release</h3>
                    <p>Techniques like Somatic Experiencing and EMDR help release the physical charge stored in the body.</p>
                    <h2>Part III: Communicating Pain</h2>
                    <p>Protect your ego by using trauma language, not shame language. Frame symptoms as survival strategies, not failures.</p>
                `
            }
        };

        const resources = [
            { name: "National Suicide & Crisis Lifeline", service: "24/7 Counseling", contact: "988" },
            { name: "Crisis Text Line", service: "Text-based support", contact: "HOME to 741741" },
            { name: "National Domestic Violence Hotline", service: "Safety & Support", contact: "1-800-799-7233" },
            { name: "SAMHSA National Helpline", service: "Treatment Referrals", contact: "1-800-662-4357" }
        ];

        let currentBookId = null;
        let isReading = false;
        let audioContext = null;

        // --- View Logic ---

        function openReader(id) {
            currentBookId = id;
            const book = books[id];
            document.getElementById('book-display').innerHTML = book.content;
            document.getElementById('home-view').classList.add('hidden');
            document.getElementById('reader-view').classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        function closeReader() {
            stopTTS();
            document.getElementById('reader-view').classList.add('hidden');
            document.getElementById('home-view').classList.remove('hidden');
            currentBookId = null;
        }

        function scrollToResources() {
            document.getElementById('resources-section').scrollIntoView({ behavior: 'smooth' });
        }

        function populateResources() {
            const list = document.getElementById('resource-list');
            list.innerHTML = resources.map(r => `
                <div class="bg-white p-4 rounded-xl flex justify-between items-center shadow-sm border border-slate-200">
                    <div>
                        <div class="font-bold text-slate-900">${r.name}</div>
                        <div class="text-sm text-slate-500">${r.service}</div>
                    </div>
                    <div class="font-bold text-indigo-600">${r.contact}</div>
                </div>
            `).join('');
        }

        // --- Text To Speech Logic (Gemini API) ---

        async function toggleTTS() {
            if (isReading) {
                stopTTS();
                return;
            }
            
            const textToRead = document.getElementById('book-display').innerText;
            const statusEl = document.getElementById('reading-status');
            const btnEl = document.getElementById('tts-btn');
            const overlay = document.getElementById('loading-overlay');

            try {
                overlay.classList.remove('hidden');
                isReading = true;
                statusEl.classList.remove('hidden');
                btnEl.innerHTML = '<i class="fa-solid fa-stop"></i>';
                btnEl.classList.add('bg-red-500', 'text-white');

                await generateAndPlaySpeech(textToRead);
            } catch (err) {
                console.error(err);
                stopTTS();
            } finally {
                overlay.classList.add('hidden');
            }
        }

        function stopTTS() {
            isReading = false;
            document.getElementById('reading-status').classList.add('hidden');
            const btnEl = document.getElementById('tts-btn');
            btnEl.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
            btnEl.classList.remove('bg-red-500', 'text-white');
            
            if (audioContext) {
                audioContext.close();
                audioContext = null;
            }
        }

        async function generateAndPlaySpeech(text) {
            // Natural language control for Gemini TTS
            const formattedText = `In a calm, compassionate voice: ${text.substring(0, 1000)}`; // Truncate for demo if needed
            
            const payload = {
                contents: [{ parts: [{ text: formattedText }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName: "Aoede" } // Calm feminine voice
                        }
                    }
                },
                model: "gemini-2.5-flash-preview-tts"
            };

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(payload)
            });

            if (!response.ok) throw new Error("TTS API Failure");
            const result = await response.json();
            const pcmBase64 = result.candidates[0].content.parts[0].inlineData.data;
            const mimeType = result.candidates[0].content.parts[0].inlineData.mimeType;
            const sampleRate = parseInt(mimeType.split('rate=')[1]) || 24000;

            const audioData = base64ToUint8Array(pcmBase64);
            const wavData = pcmToWav(audioData, sampleRate);
            playWav(wavData);
        }

        function base64ToUint8Array(base64) {
            const binaryString = atob(base64);
            const bytes = new Uint8Array(binaryString.length);
            for (let i = 0; i < binaryString.length; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes;
        }

        function pcmToWav(pcmData, sampleRate) {
            const numChannels = 1;
            const bitsPerSample = 16;
            const byteRate = (sampleRate * numChannels * bitsPerSample) / 8;
            const blockAlign = (numChannels * bitsPerSample) / 8;
            const dataSize = pcmData.length;
            const buffer = new ArrayBuffer(44 + dataSize);
            const view = new DataView(buffer);

            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };

            writeString(0, 'RIFF');
            view.setUint32(4, 36 + dataSize, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true); // PCM format
            view.setUint16(22, numChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, byteRate, true);
            view.setUint16(32, blockAlign, true);
            view.setUint16(34, bitsPerSample, true);
            writeString(36, 'data');
            view.setUint32(40, dataSize, true);

            for (let i = 0; i < dataSize; i++) {
                view.setUint8(44 + i, pcmData[i]);
            }

            return buffer;
        }

        function playWav(wavBuffer) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            audioContext.decodeAudioData(wavBuffer, (buffer) => {
                const source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.connect(audioContext.destination);
                source.onended = () => stopTTS();
                source.start(0);
            });
        }

        // Initialize
        window.onload = () => {
            populateResources();
        };
    </script>
</body>
</html>
